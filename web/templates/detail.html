{% extends "base.html" %}

{% block content %}
<a class="back-link" href="{{ url_for('index') }}">← 返回列表</a>

<section class="paper-detail">
    <h2>{{ paper.title }}</h2>
    <div class="meta-grid">
        <div>
            <span class="meta-label">来源</span>
            <span>{{ paper.source or '未知' }}</span>
        </div>
        <div>
            <span class="meta-label">状态</span>
            <span>{{ paper.status }}</span>
        </div>
        <div>
            <span class="meta-label">arXiv ID</span>
            <span>{{ paper.arxiv_id or 'N/A' }}</span>
        </div>
        <div>
            <span class="meta-label">发布时间</span>
            <span>{{ paper.published_date or '未知' }}</span>
        </div>
    </div>
</section>

<section class="content-grid">
    <div class="panel">
        <h3>PDF 预览</h3>
        {% if has_pdf %}
            <iframe src="{{ url_for('serve_pdf', paper_id=paper.id) }}" title="PDF preview"></iframe>
        {% else %}
            <p class="empty">未找到PDF文件</p>
        {% endif %}
    </div>
    <div class="panel">
        <h3>文本内容</h3>
        {% if text_preview %}
            <pre>{{ text_preview }}</pre>
            <a href="{{ url_for('serve_text', paper_id=paper.id) }}" target="_blank">查看完整文本</a>
        {% else %}
            <p class="empty">未找到文本内容</p>
        {% endif %}
    </div>
</section>

<section class="panel">
    <h3>相关性分析</h3>
    {% if analysis %}
        <div class="analysis-grid">
            <div>
                <span class="meta-label">是否相关</span>
                <span>{{ '是' if analysis.is_relevant else '否' }}</span>
            </div>
            <div>
                <span class="meta-label">相关性分数</span>
                <span>{{ "{:.2f}".format(analysis.relevance_score) }}</span>
            </div>
        </div>
        <div class="analysis-block">
            <h4>理由</h4>
            <p>{{ analysis.reasoning }}</p>
        </div>
        <div class="analysis-block">
            <h4>总结</h4>
            <p>{{ analysis.summary }}</p>
        </div>
    {% else %}
        <p class="empty">暂无分析结果</p>
    {% endif %}
</section>
{% endblock %}

